<!DOCTYPE html>
 <html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.js"></script>
<link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.css" rel="stylesheet" />
<style>
body { margin:0; padding:0; }
#map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
 
<body>
<div id="map"></div>
    
 
<script>
               let p = "https://data.cityofnewyork.us/resource/a2h9-9z38.json"
         $.ajax({
  
	           url : p,
	           type : 'GET',
	           dataType:'json',
	           success : function(data) {
                   for (i = 0; i <= 1000; i++) {
                    console.log(data[i].longitude);
                    console.log(data[i].latitude);
               } 
           }
         })
mapboxgl.accessToken = "pk.eyJ1Ijoib2FzaXN4IiwiYSI6ImNqdTRvaXpjOTEwN2Y0NHNhczF5bWg1NHUifQ.0xP8b-h5OvzfbRRlfokmCw";
 
/* Map: This represents the map on the page. */
var map = new mapboxgl.Map({
container: "map",
style: "mapbox://styles/mapbox/dark-v10",
zoom: 3.77,
center: [-74.003194019106,32.5979]
});
 
map.on("load", function () {
/* Image: An image is loaded and added to the map. */
map.loadImage("https://i.imgur.com/MK4NUzI.png", function(error, image) {
if (error) throw error;
map.addImage("custom-marker", image);
/* Style layer: A style layer ties together the source and image and specifies how they are displayed on the map. */
map.addLayer({
id: "markers",
type: "symbol",
/* Source: A data source specifies the geographic coordinate where the image marker gets placed. */
source: {
type: "geojson",
data: {
type: 'FeatureCollection',
features: [
{
type: 'Feature',
properties: {},
geometry: {
type: "Point",
coordinates: [data[i].longitude, data[i].latitude]
}
}
]
}
},
layout: {
"icon-image": "custom-marker",
}
});
});
});
    

</script>
    
 
</body>
</html>